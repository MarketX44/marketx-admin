<!DOCTYPE html>
<html>
<head>
    <title>Market-X | Home</title>
    <style>
        body { background: #121212; color: white; font-family: sans-serif; margin: 0; }
        .nav { background: #1f1f1f; padding: 20px; display: flex; justify-content: space-between; }
        .balance-card { background: linear-gradient(45deg, #0d47a1, #1976d2); padding: 20px; margin: 20px; border-radius: 15px; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .product-card { background: #222; padding: 15px; border-radius: 10px; text-align: center; }
        .grab-btn { background: #ff9800; border: none; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="nav">
        <span>Market-X Mall</span>
        <span id="userEmail">Loading...</span>
    </div>

    <div class="balance-card">
        <p>Total Assets</p>
        <h1 id="userBalance">$0.00</h1>
    </div>

    <div class="product-grid">
        <div class="product-card">
            <img src="https://via.placeholder.com/100" alt="item">
            <p>Smart Watch</p>
            <p style="color: #4caf50;">$120.00</p>
            <button class="grab-btn">Grab Order</button>
        </div>
        <div class="product-card">
            <img src="https://via.placeholder.com/100" alt="item">
            <p>Wireless Earbuds</p>
            <p style="color: #4caf50;">$85.00</p>
            <button class="grab-btn">Grab Order</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC_h1U5C2PWZgijCdgOBR8noVZGpCE6RMc",
            authDomain: "global-market-mall.firebaseapp.com",
            projectId: "global-market-mall",
            appId: "1:940088052682:web:420dfa92084d07a3c31d33"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                document.getElementById('userEmail').innerText = user.email;
                const docSnap = await getDoc(doc(db, "users", user.uid));
                if (docSnap.exists()) {
                    document.getElementById('userBalance').innerText = "$" + docSnap.data().balance;
                }
            } else {
                window.location.href = "login.html";
            }
        });
    </script>
</body>
</html>
